{"version":3,"file":"ellipticWrapper.esm.js","sources":["../src/ed25519.ts"],"sourcesContent":["import BN from \"bn.js\";\nimport EC, { curve } from \"elliptic\";\n\nimport { EllipticCurve } from \"./interface\";\n\nexport class Ed25519Curve extends EC.ec implements EllipticCurve {\n  constructor() {\n    super(\"ed25519\");\n  }\n\n  bufferToScalar(b: Buffer): BN {\n    return new BN(b, \"le\");\n  }\n\n  generateScalar(): BN {\n    return this.genKeyPair().getPrivate();\n  }\n\n  scalarToBuffer(s: BN, buf: typeof Buffer): Buffer {\n    s.toString(\"hex\");\n    return s.toArrayLike(buf, \"le\", 32);\n  }\n\n  pointToBuffer(p: curve.base.BasePoint, buf: typeof Buffer): Buffer {\n    // Each y has 2 possible x-values, x and -x. When compressing, it's enough to\n    // store y and use the last byte to encode the sign of x.\n    const x = p.getX();\n    const y = p.getY();\n    const b = y.toArrayLike(buf, \"le\", 32);\n    b[b.length - 1] |= x.and(new BN(1)).eqn(1) ? 0x80 : 0x00;\n    return b;\n  }\n}\n"],"names":["Ed25519Curve","EC","ec","constructor","bufferToScalar","b","BN","generateScalar","genKeyPair","getPrivate","scalarToBuffer","s","buf","toString","toArrayLike","pointToBuffer","p","x","getX","y","getY","length","and","eqn"],"mappings":";;;AAKO,MAAMA,YAAY,SAASC,EAAE,CAACC,EAAE,CAA0B;AAC/DC,EAAAA,WAAWA,GAAG;IACZ,KAAK,CAAC,SAAS,CAAC,CAAA;AAClB,GAAA;EAEAC,cAAcA,CAACC,CAAS,EAAM;AAC5B,IAAA,OAAO,IAAIC,EAAE,CAACD,CAAC,EAAE,IAAI,CAAC,CAAA;AACxB,GAAA;AAEAE,EAAAA,cAAcA,GAAO;IACnB,OAAO,IAAI,CAACC,UAAU,EAAE,CAACC,UAAU,EAAE,CAAA;AACvC,GAAA;AAEAC,EAAAA,cAAcA,CAACC,CAAK,EAAEC,GAAkB,EAAU;AAChDD,IAAAA,CAAC,CAACE,QAAQ,CAAC,KAAK,CAAC,CAAA;IACjB,OAAOF,CAAC,CAACG,WAAW,CAACF,GAAG,EAAE,IAAI,EAAE,EAAE,CAAC,CAAA;AACrC,GAAA;AAEAG,EAAAA,aAAaA,CAACC,CAAuB,EAAEJ,GAAkB,EAAU;AACjE;AACA;AACA,IAAA,MAAMK,CAAC,GAAGD,CAAC,CAACE,IAAI,EAAE,CAAA;AAClB,IAAA,MAAMC,CAAC,GAAGH,CAAC,CAACI,IAAI,EAAE,CAAA;IAClB,MAAMf,CAAC,GAAGc,CAAC,CAACL,WAAW,CAACF,GAAG,EAAE,IAAI,EAAE,EAAE,CAAC,CAAA;IACtCP,CAAC,CAACA,CAAC,CAACgB,MAAM,GAAG,CAAC,CAAC,IAAIJ,CAAC,CAACK,GAAG,CAAC,IAAIhB,EAAE,CAAC,CAAC,CAAC,CAAC,CAACiB,GAAG,CAAC,CAAC,CAAC,GAAG,IAAI,GAAG,IAAI,CAAA;AACxD,IAAA,OAAOlB,CAAC,CAAA;AACV,GAAA;AACF;;;;"}