!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.FetchNodeDetails=t():e.FetchNodeDetails=t()}(self,(()=>(()=>{var e={743:e=>{"use strict";var t=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===o}(e)}(e)},o="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function n(e,t){return!1!==t.clone&&t.isMergeableObject(e)?s((o=e,Array.isArray(o)?[]:{}),e,t):e;var o}function r(e,t,o){return e.concat(t).map((function(e){return n(e,o)}))}function i(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return Object.propertyIsEnumerable.call(e,t)})):[]}(e))}function a(e,t){try{return t in e}catch(e){return!1}}function s(e,o,c){(c=c||{}).arrayMerge=c.arrayMerge||r,c.isMergeableObject=c.isMergeableObject||t,c.cloneUnlessOtherwiseSpecified=n;var d=Array.isArray(o);return d===Array.isArray(e)?d?c.arrayMerge(e,o,c):function(e,t,o){var r={};return o.isMergeableObject(e)&&i(e).forEach((function(t){r[t]=n(e[t],o)})),i(t).forEach((function(i){(function(e,t){return a(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,i)||(a(e,i)&&o.isMergeableObject(t[i])?r[i]=function(e,t){if(!t.customMerge)return s;var o=t.customMerge(e);return"function"==typeof o?o:s}(i,o)(e[i],t[i],o):r[i]=n(t[i],o))})),r}(e,o,c):n(o,c)}s.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,o){return s(e,o,t)}),{})};var c=s;e.exports=c},880:function(e,t,o){var n,r;!function(i,a){"use strict";n=function(){var e=function(){},t="undefined",o=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"],r={},i=null;function a(e,t){var o=e[t];if("function"==typeof o.bind)return o.bind(e);try{return Function.prototype.bind.call(o,e)}catch(t){return function(){return Function.prototype.apply.apply(o,[e,arguments])}}}function s(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function c(){for(var o=this.getLevel(),r=0;r<n.length;r++){var i=n[r];this[i]=r<o?e:this.methodFactory(i,o,this.name)}if(this.log=this.debug,typeof console===t&&o<this.levels.SILENT)return"No console available for logging"}function d(e){return function(){typeof console!==t&&(c.call(this),this[e].apply(this,arguments))}}function u(n,r,i){return function(n){return"debug"===n&&(n="log"),typeof console!==t&&("trace"===n&&o?s:void 0!==console[n]?a(console,n):void 0!==console.log?a(console,"log"):e)}(n)||d.apply(this,arguments)}function f(e,o){var a,s,d,f=this,l="loglevel";function p(){var e;if(typeof window!==t&&l){try{e=window.localStorage[l]}catch(e){}if(typeof e===t)try{var o=window.document.cookie,n=encodeURIComponent(l),r=o.indexOf(n+"=");-1!==r&&(e=/^([^;]+)/.exec(o.slice(r+n.length+1))[1])}catch(e){}return void 0===f.levels[e]&&(e=void 0),e}}function b(e){var t=e;if("string"==typeof t&&void 0!==f.levels[t.toUpperCase()]&&(t=f.levels[t.toUpperCase()]),"number"==typeof t&&t>=0&&t<=f.levels.SILENT)return t;throw new TypeError("log.setLevel() called with invalid level: "+e)}"string"==typeof e?l+=":"+e:"symbol"==typeof e&&(l=void 0),f.name=e,f.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},f.methodFactory=o||u,f.getLevel=function(){return null!=d?d:null!=s?s:a},f.setLevel=function(e,o){return d=b(e),!1!==o&&function(e){var o=(n[e]||"silent").toUpperCase();if(typeof window!==t&&l){try{return void(window.localStorage[l]=o)}catch(e){}try{window.document.cookie=encodeURIComponent(l)+"="+o+";"}catch(e){}}}(d),c.call(f)},f.setDefaultLevel=function(e){s=b(e),p()||f.setLevel(e,!1)},f.resetLevel=function(){d=null,function(){if(typeof window!==t&&l){try{window.localStorage.removeItem(l)}catch(e){}try{window.document.cookie=encodeURIComponent(l)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}(),c.call(f)},f.enableAll=function(e){f.setLevel(f.levels.TRACE,e)},f.disableAll=function(e){f.setLevel(f.levels.SILENT,e)},f.rebuild=function(){if(i!==f&&(a=b(i.getLevel())),c.call(f),i===f)for(var e in r)r[e].rebuild()},a=b(i?i.getLevel():"WARN");var h=p();null!=h&&(d=b(h)),c.call(f)}(i=new f).getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=r[e];return t||(t=r[e]=new f(e,i.methodFactory)),t};var l=typeof window!==t?window.log:void 0;return i.noConflict=function(){return typeof window!==t&&window.log===i&&(window.log=l),i},i.getLoggers=function(){return r},i.default=i,i},void 0===(r=n.call(t,o,t,e))||(e.exports=r)}()}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,o),i.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,o,n){return(o=function(t){var o=function(t,o){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(o)?o:o+""}(o))in t?Object.defineProperty(t,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[o]=n,t}o.r(n),o.d(n,{NodeDetailManager:()=>A});const r={MAINNET:"mainnet",TESTNET:"testnet",CYAN:"cyan",AQUA:"aqua",CELESTE:"celeste"},i={SAPPHIRE_DEVNET:"sapphire_devnet",SAPPHIRE_MAINNET:"sapphire_mainnet"},a=[],s={[r.AQUA]:{migrationCompleted:!0,networkIdentifier:"aqua",networkMigratedTo:i.SAPPHIRE_MAINNET},[r.CELESTE]:{migrationCompleted:!0,networkIdentifier:"celeste",networkMigratedTo:i.SAPPHIRE_MAINNET},[r.CYAN]:{migrationCompleted:!0,networkIdentifier:"cyan",networkMigratedTo:i.SAPPHIRE_MAINNET},[r.MAINNET]:{migrationCompleted:!0,networkIdentifier:"mainnet",networkMigratedTo:i.SAPPHIRE_MAINNET},[r.TESTNET]:{migrationCompleted:!0,networkIdentifier:"teal",networkMigratedTo:i.SAPPHIRE_DEVNET}},c={[r.MAINNET]:"https://metadata.web3auth.io",[r.TESTNET]:"https://metadata.web3auth.io",[r.CYAN]:"https://metadata.web3auth.io",[r.AQUA]:"https://metadata.web3auth.io",[r.CELESTE]:"https://metadata.web3auth.io"},d="secp256k1",u={[i.SAPPHIRE_DEVNET]:["https://node-1.dev-node.web3auth.io","https://node-2.dev-node.web3auth.io","https://node-3.dev-node.web3auth.io","https://node-4.dev-node.web3auth.io","https://node-5.dev-node.web3auth.io"],[i.SAPPHIRE_MAINNET]:["https://node-1.node.web3auth.io","https://node-2.node.web3auth.io","https://node-3.node.web3auth.io","https://node-4.node.web3auth.io","https://node-5.node.web3auth.io"]},f=(e,t)=>{const o=u[e];if(!o||0===o.length)throw new Error(`Unsupported network: ${e}`);const n=s[t];return o.map((e=>n&&n.networkIdentifier?`${e}/sss/${n.networkIdentifier}/jrpc`:`${e}/sss/jrpc`))},l=(e,t)=>{const o=u[e];if(!o||0===o.length)throw new Error(`Unsupported network: ${e}`);const n=s[t];return o.map((e=>n&&n.networkIdentifier?`${e}/rss/${n.networkIdentifier}`:`${e}/rss`))},p=(e,t,o=d)=>{const n=u[e];if(!n||0===n.length)throw new Error(`Unsupported network: ${e}`);const r="ed25519"===o?"tss-frost":"tss",i=s[t];return n.map((e=>i&&i.networkIdentifier?`${e}/${r}/${i.networkIdentifier}`:`${e}/${r}`))},b={[i.SAPPHIRE_MAINNET]:[{X:"e0925898fee0e9e941fdca7ee88deec99939ae9407e923535c4d4a3a3ff8b052",Y:"54b9fea924e3f3e40791f9987f4234ae4222412d65b74068032fa5d8b63375c1"},{X:"9124cf1e280aab32ba50dffd2de81cecabc13d82d2c1fe9de82f3b3523f9b637",Y:"fca939a1ceb42ce745c55b21ef094f543b457630cb63a94ef4f1afeee2b1f107"},{X:"555f681a63d469cc6c3a58a97e29ebd277425f0e6159708e7c7bf05f18f89476",Y:"606f2bcc0884fa5b64366fc3e8362e4939841b56acd60d5f4553cf36b891ac4e"},{X:"2b5f58d8e340f1ab922e89b3a69a68930edfe51364644a456335e179bc130128",Y:"4b4daa05939426e3cbe7d08f0e773d2bf36f64c00d04620ee6df2a7af4d2247"},{X:"3ecbb6a68afe72cf34ec6c0a12b5cb78a0d2e83ba402983b6adbc5f36219861a",Y:"dc1031c5cc8f0472bd521a62a64ebca9e163902c247bf05937daf4ae835091e4"}],[i.SAPPHIRE_DEVNET]:[{X:"f74389b0a4c8d10d2a687ae575f69b20f412d41ab7f1fe6b358aa14871327247",Y:"54e3a73098ed9bced3ef8821736e9794f9264a1420c0c7ad15d2fa617ba35ef7"},{X:"bc38813a6873e526087918507c78fc3a61624670ee851ecfb4f3bef55d027b5a",Y:"ac4b21229f662a0aefdfdac21cf17c3261a392c74a8790db218b34e3e4c1d56a"},{X:"b56541684ea5fa40c8337b7688d502f0e9e092098962ad344c34e94f06d293fb",Y:"759a998cef79d389082f9a75061a29190eec0cac99b8c25ddcf6b58569dad55c"},{X:"7bcb058d4c6ffc6ba4bfdfd93d141af35a66338a62c7c27cdad2ae3f8289b767",Y:"336ab1935e41ed4719e162587f0ab55518db4207a1eb36cc72303f1b86689d2b"},{X:"bf12a136ef94399ea098f926f04e26a4ec4ac70f69cce274e8893704c4951773",Y:"bdd44828020f52ce510e026338216ada184a6867eb4e19fb4c2d495d4a7e15e4"}]},h=(e,t,o)=>({currentEpoch:"1",torusNodeEndpoints:f(e,t),torusNodeSSSEndpoints:f(e,t),torusNodeRSSEndpoints:l(e,t),torusNodeTSSEndpoints:p(e,t,o),torusIndexes:[1,2,3,4,5],torusNodePub:b[e]});function y(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function w(e){for(var o=1;o<arguments.length;o++){var n=null!=arguments[o]?arguments[o]:{};o%2?y(Object(n),!0).forEach((function(o){t(e,o,n[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=o(743),E=o.n(v),g=o(880),S=o.n(g);const m=S().getLogger("http-helpers");m.setLevel(g.levels.INFO);let N="torus-default";const T=async(e,t={},o={})=>{const n={mode:"cors",headers:{}};o.useAPIKey&&(n.headers=w(w({},n.headers),function(){const e={};return N&&(e["x-api-key"]=N),e}())),t.method="GET";const r=E()(n,t),i=await async function(e,t){let o=null;try{o=new URL(e)}catch(e){}return fetch(e,t)}(e,r);if(i.ok){const e=i.headers.get("content-type");return null!=e&&e.includes("application/json")?i.json():i.text()}throw function(e){m.info(`Response: ${e.status} ${e.statusText}`),m.info(`Url: ${e.url}`)}(i),i},I=S().getLogger("fnd"),A=class{constructor({network:e=i.SAPPHIRE_MAINNET,keyType:o=d,fndServerEndpoint:n,enableLogging:r=!1}={}){t(this,"fndServerEndpoint","https://fnd.web3auth.io/node-details"),t(this,"_currentEpoch","1"),t(this,"_keyType",void 0),t(this,"_torusNodeEndpoints",[]),t(this,"_torusNodeRSSEndpoints",[]),t(this,"_torusNodeSSSEndpoints",[]),t(this,"_torusNodeTSSEndpoints",[]),t(this,"_torusNodePub",[]),t(this,"_torusIndexes",[]),t(this,"updated",void 0),t(this,"network",void 0),this.network=e,this._keyType=o,this.updated=!1,n&&(this.fndServerEndpoint=n),r?I.enableAll():I.disableAll()}get _nodeDetails(){return{currentEpoch:this._currentEpoch,torusNodeEndpoints:this._torusNodeEndpoints,torusNodeSSSEndpoints:this._torusNodeSSSEndpoints,torusNodeRSSEndpoints:this._torusNodeRSSEndpoints,torusNodeTSSEndpoints:this._torusNodeTSSEndpoints,torusNodePub:this._torusNodePub,torusIndexes:this._torusIndexes,updated:this.updated}}async getNodeDetails({verifier:e,verifierId:t}){try{if(this.updated&&!a.includes(this.network))return this._nodeDetails;try{const{nodeDetails:o}=await T(`${this.fndServerEndpoint}?network=${this.network}&verifier=${e}&verifierId=${t}&keyType=${this._keyType}`);return this.setNodeDetails(o),this._nodeDetails}catch(e){I.error("Failed to fetch node details from server, using local.",e)}const o=function(e,t){if(Object.values(i).includes(e))return h(e,void 0,t);if(Object.values(r).includes(e)){const o=s[e];if(o.migrationCompleted)return h(o.networkMigratedTo,e,t)}}(this.network,this._keyType);if(!o)throw new Error("Failed to fetch node details");return this.setNodeDetails(o),this._nodeDetails}catch(e){throw I.error("Failed to fetch node details",e),e}}async getMetadataUrl(){return Object.values(r).includes(this.network)?c[this.network]:(await this.getNodeDetails({verifier:"test-verifier",verifierId:"test-verifier-id"})).torusNodeEndpoints[0].replace("/sss/jrpc","/metadata")}setNodeDetails(e){const{currentEpoch:t,torusNodeEndpoints:o,torusNodeSSSEndpoints:n,torusNodeRSSEndpoints:r,torusNodeTSSEndpoints:i,torusNodePub:a,torusIndexes:s}=e;this._torusNodeEndpoints=o,this._torusNodeSSSEndpoints=n||[],this._torusNodeRSSEndpoints=r||[],this._torusNodeTSSEndpoints=i||[],this._torusNodePub=a,this._torusIndexes=s,this._currentEpoch=t,this.updated=!0}}})(),n})()));